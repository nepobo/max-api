# MAX API Library

Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º MAX —á–µ—Ä–µ–∑ API.

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å MAX Messenger API. –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —á–∞—Ç-–±–æ—Ç–æ–≤, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ –ü—Ä–æ—Å—Ç–æ–π –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç –¥–ª—è MAX API
- üì® –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- üîî –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Long Polling
- ‚å®Ô∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä
- üí¨ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (Markdown, HTML)
- üñ•Ô∏è –ì–æ—Ç–æ–≤–æ–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- üìù –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (Linux/Ubuntu/Debian)

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
bash install.sh
```

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ python3-venv (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
sudo apt update && sudo apt install python3.12-venv python3-full -y

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv venv

# 3. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏ venv\Scripts\activate –Ω–∞ Windows

# 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### –ß–µ—Ä–µ–∑ pip (–ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)

```bash
pip install max-api
```

> **–í–∞–∂–Ω–æ –¥–ª—è Linux:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏ `externally-managed-environment`. –°–º. [INSTALL_LINUX.md](INSTALL_LINUX.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ MAX –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤](https://business.max.ru/self)
2. –°–æ–∑–¥–∞–π—Ç–µ —á–∞—Ç-–±–æ—Ç–∞
3. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Ä–∞–∑–¥–µ–ª–µ "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Üí –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω"

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
from max_api import MAXClient

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
client = MAXClient(token="YOUR_BOT_TOKEN")

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ
bot = client.get_me()
print(f"–ë–æ—Ç: {bot['name']}")

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
message = client.send_message(
    chat_id=123456789,
    text="–ü—Ä–∏–≤–µ—Ç! üëã"
)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
for update in client.get_updates():
    if update.get('update_type') == 'message_created':
        print(f"–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {update['message']['body']['text']}")
```

### 3. –ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
MAX_BOT_TOKEN=your_bot_token_here
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
python -m console_app.main
```

## –ü—Ä–∏–º–µ—Ä—ã

### –≠—Ö–æ-–±–æ—Ç

```python
from max_api import MAXClient

client = MAXClient(token="YOUR_TOKEN")

print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω. –û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π...")

while True:
    updates = client.get_updates(timeout=30)
    
    for update in updates:
        if update.get('update_type') == 'message_created':
            message = update['message']
            chat_id = message['recipient']['chat_id']
            text = message['body']['text']
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ —Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            client.send_message(chat_id=chat_id, text=f"–í—ã –Ω–∞–ø–∏—Å–∞–ª–∏: {text}")
```

### –ë–æ—Ç —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π

```python
from max_api import MAXClient

client = MAXClient(token="YOUR_TOKEN")

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏
keyboard = {
    "type": "inline_keyboard",
    "payload": {
        "buttons": [
            [
                {"type": "callback", "text": "–ö–Ω–æ–ø–∫–∞ 1", "payload": "btn1"},
                {"type": "callback", "text": "–ö–Ω–æ–ø–∫–∞ 2", "payload": "btn2"}
            ],
            [
                {"type": "link", "text": "–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç", "url": "https://max.ru"}
            ]
        ]
    }
}

client.send_message(
    chat_id=123456789,
    text="–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
    attachments=[keyboard]
)
```

–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ –ø–∞–ø–∫–µ [`examples/`](examples/).

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### MAXClient

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API.

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```python
client = MAXClient(
    token="YOUR_TOKEN",
    base_url="https://platform-api.max.ru"  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
)
```

#### –ú–µ—Ç–æ–¥—ã

##### get_me()

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ.

```python
bot_info = client.get_me()
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {'user_id': 1, 'name': 'My Bot', 'username': 'my_bot', ...}
```

##### send_message(chat_id, text, attachments=None, format=None)

–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `chat_id` (int) - ID —á–∞—Ç–∞
- `text` (str) - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `attachments` (list, optional) - –í–ª–æ–∂–µ–Ω–∏—è (–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, —Ñ–∞–π–ª—ã)
- `format` (str, optional) - –§–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç–∞ ('markdown' –∏–ª–∏ 'html')

```python
message = client.send_message(
    chat_id=123456789,
    text="**–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**",
    format="markdown"
)
```

##### get_updates(limit=None, timeout=30, marker=None, update_types=None)

–ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (Long Polling).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int, optional) - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- `timeout` (int) - –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
- `marker` (int, optional) - –ú–∞—Ä–∫–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `update_types` (list, optional) - –¢–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è

```python
updates = client.get_updates(timeout=30, limit=10)
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
max-api/
‚îú‚îÄ‚îÄ max_api/              # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ client.py         # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ methods/          # –ú–µ—Ç–æ–¥—ã API
‚îÇ   ‚îú‚îÄ‚îÄ models/           # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ exceptions.py     # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ console_app/          # –ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ examples/             # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ tests/                # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ README.md
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- requests
- python-dotenv

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ [`requirements.txt`](requirements.txt).

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
git clone https://github.com/yourusername/max-api.git
cd max-api
python -m venv venv
source venv/bin/activate  # –∏–ª–∏ venv\Scripts\activate –Ω–∞ Windows
pip install -r requirements.txt
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
pytest tests/
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API

- –ú–∞–∫—Å–∏–º—É–º 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É (RPS)
- Long Polling —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Webhook

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MAX API](https://dev.max.ru/docs-api)
- [–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤](https://business.max.ru/self)
- [FAQ](https://dev.max.ru/help)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ê–≤—Ç–æ—Ä

–í–∞—à–µ –∏–º—è / –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è

## Changelog

### v0.1.0 (2026-02-25)
- –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏/–ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

# ü§ñ –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞ –∫ —á–∞—Ç—É –≤ MAX

## –°–ø–æ—Å–æ–±—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–æ—Ç–æ–º

### 1Ô∏è‚É£ –ü—Ä—è–º–æ–π —á–∞—Ç —Å –±–æ—Ç–æ–º (–õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –±–æ—Ç–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–∞–π—Ç–∏ –µ–≥–æ –ø–æ:

**–ü–æ –∏–º–µ–Ω–∏ –±–æ—Ç–∞:**
- –û—Ç–∫—Ä—ã—Ç—å MAX
- –ù–∞–∂–∞—Ç—å –Ω–∞ –ø–æ–∏—Å–∫
- –í–≤–µ—Å—Ç–∏ –∏–º—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
- –ù–∞–∂–∞—Ç—å "–ù–∞–ø–∏—Å–∞—Ç—å" –∏–ª–∏ "–ù–∞—á–∞—Ç—å"

**–ü–æ –ø—É–±–ª–∏—á–Ω–æ–π —Å—Å—ã–ª–∫–µ:**
- –§–æ—Ä–º–∞—Ç: `https://max.ru/<botUsername>`
- –ù–∞–ø—Ä–∏–º–µ—Ä: `https://max.ru/mybot_bot`

**–ü–æ deeplink —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
```
https://max.ru/<botUsername>?start=<payload>
```

–ü—Ä–∏–º–µ—Ä:
```
https://max.ru/mybot_bot?start=promo_2026
```

### 2Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç

#### –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø—ã

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–æ—Ç—ã **–ù–ï –ú–û–ì–£–¢** –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –≥—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã. –ù—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é:

**–®–∞–≥–∏:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [–ø–ª–∞—Ç—Ñ–æ—Ä–º—É MAX –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤](https://business.max.ru/self)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Å–∫–æ–ª—å–∫–æ)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **–ß–∞—Ç-–±–æ—Ç –∏ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí –ù–∞—Å—Ç—Ä–æ–∏—Ç—å**
4. **–í–∫–ª—é—á–∏—Ç–µ** –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç
5. –ù–∞–∂–º–∏—Ç–µ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É

–ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:

1. –û—Ç–∫—Ä—ã—Ç—å –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç –≤ MAX
2. –ù–∞–∂–∞—Ç—å –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–∞—Ç–µ (‚ãÆ –∏–ª–∏ i)
3. –í—ã–±—Ä–∞—Ç—å "–£—á–∞—Å—Ç–Ω–∏–∫–∏" ‚Üí "–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞"
4. –ù–∞–π—Ç–∏ –±–æ—Ç–∞ –ø–æ –∏–º–µ–Ω–∏
5. –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ —á–∞—Ç

### 3Ô∏è‚É£ –ü–æ–ª—É—á–µ–Ω–∏–µ chat_id –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–ß—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –≤ —á–∞—Ç, –≤–∞–º –Ω—É–∂–µ–Ω `chat_id`.

#### –°–ø–æ—Å–æ–± 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –±–æ—Ç—É, –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ `chat_id`:

```python
from max_api import MAXClient
import os
from dotenv import load_dotenv

load_dotenv()
client = MAXClient(token=os.getenv('MAX_BOT_TOKEN'))

print("–û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è chat_id...")

updates = client.get_updates(timeout=30)
for update in updates:
    if update.get('update_type') == 'message_created':
        message = update['message']
        chat_id = message['recipient']['chat_id']
        sender = message['sender']
        
        print(f"\n=== –ü–æ–ª—É—á–µ–Ω chat_id ===")
        print(f"–û—Ç: {sender.get('name')}")
        print(f"User ID: {sender.get('user_id')}")
        print(f"Chat ID: {chat_id}")
        print(f"=======================\n")
        
        # –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç
        client.send_message(
            chat_id=chat_id,
            text=f"–í–∞—à chat_id: {chat_id}"
        )
```

#### –°–ø–æ—Å–æ–± 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ (bot_started)

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–ø–µ—Ä–≤—ã–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ deeplink:

```python
updates = client.get_updates(timeout=30)
for update in updates:
    if update.get('update_type') == 'bot_started':
        chat_id = update.get('chat_id')
        user = update.get('user', {})
        payload = update.get('payload', '')
        
        print(f"–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º {user.get('name')}")
        print(f"Chat ID: {chat_id}")
        print(f"Payload: {payload}")
        
        # –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        client.send_message(
            chat_id=chat_id,
            text=f"–ü—Ä–∏–≤–µ—Ç! –í–∞—à chat_id: {chat_id}"
        )
```

---

## üìù –ü—Ä–∏–º–µ—Ä: –ë–æ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è chat_id

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `get_chat_id_bot.py`:

```python
"""
–ë–æ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è chat_id
–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏ –æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç –≤–∞—à–∏–º chat_id
"""

import sys
import os
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

from max_api import MAXClient
from dotenv import load_dotenv

load_dotenv()

def main():
    token = os.getenv('MAX_BOT_TOKEN')
    if not token:
        print("–û—à–∏–±–∫–∞: MAX_BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ .env")
        return
    
    client = MAXClient(token=token)
    bot_info = client.get_me()
    
    print(f"‚úì –ë–æ—Ç '{bot_info['name']}' (@{bot_info['username']}) –∑–∞–ø—É—â–µ–Ω!")
    print("\n" + "="*60)
    print("üì± –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å chat_id:")
    print("="*60)
    print(f"1. –û—Ç–∫—Ä–æ–π—Ç–µ MAX –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞: @{bot_info['username']}")
    print("2. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")
    print("3. –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç –≤–∞—à–∏–º chat_id")
    print("="*60 + "\n")
    print("–û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π... (Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)\n")
    
    last_marker = None
    
    try:
        while True:
            updates = client.get_updates(timeout=30, marker=last_marker)
            
            for update in updates:
                update_type = update.get('update_type')
                
                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
                if update_type == 'bot_started':
                    chat_id = update.get('chat_id')
                    user = update.get('user', {})
                    
                    print(f"üöÄ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω: {user.get('name')} (ID: {user.get('user_id')})")
                    print(f"   Chat ID: {chat_id}\n")
                    
                    client.send_message(
                        chat_id=chat_id,
                        text=f"üëã –ü—Ä–∏–≤–µ—Ç, {user.get('name')}!\n\n"
                             f"üìå –í–∞—à chat_id: `{chat_id}`\n"
                             f"üë§ –í–∞—à user_id: `{user.get('user_id')}`\n\n"
                             f"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ chat_id –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ API.",
                        format="markdown"
                    )
                
                # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
                elif update_type == 'message_created':
                    message = update.get('message', {})
                    sender = message.get('sender', {})
                    body = message.get('body', {})
                    recipient = message.get('recipient', {})
                    
                    chat_id = recipient.get('chat_id')
                    text = body.get('text', '')
                    
                    print(f"üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç {sender.get('name')}: {text}")
                    print(f"   Chat ID: {chat_id}")
                    print(f"   User ID: {sender.get('user_id')}\n")
                    
                    # –û—Ç–ø—Ä–∞–≤–∫–∞ chat_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                    response = (
                        f"üìå **–í–∞—à–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**\n\n"
                        f"üë§ –ò–º—è: {sender.get('name')}\n"
                        f"üÜî User ID: `{sender.get('user_id')}`\n"
                        f"üí¨ Chat ID: `{chat_id}`\n"
                        f"üìù Username: @{sender.get('username', '–Ω–µ —É–∫–∞–∑–∞–Ω')}\n\n"
                        f"–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ chat_id –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ API!"
                    )
                    
                    client.send_message(
                        chat_id=chat_id,
                        text=response,
                        format="markdown"
                    )
                
                # –û–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä
                if 'marker' in update:
                    last_marker = update['marker']
    
    except KeyboardInterrupt:
        print("\n\n‚úì –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    finally:
        client.close()


if __name__ == '__main__':
    main()
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
source venv/bin/activate
python examples/get_chat_id_bot.py
```

---

## üîç –ü–æ–∏—Å–∫ –±–æ—Ç–∞ –≤ MAX

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ MAX**
2. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ–∏—Å–∫** (üîç)
3. **–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫ –±–æ—Ç–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `@mybot_bot`)
4. **–í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞** –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
5. **–ù–∞–∂–º–∏—Ç–µ "–ù–∞–ø–∏—Å–∞—Ç—å"** –∏–ª–∏ **"–ù–∞—á–∞—Ç—å"**

### QR-–∫–æ–¥ –¥–ª—è –±–æ—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ QR-–∫–æ–¥ —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –±–æ—Ç–∞:
```
https://max.ru/<botUsername>
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR –∏ —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞.

---

## üîó –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–ø–ª–∏–Ω–∫–æ–≤ (Deep Links)

### –ë–∞–∑–æ–≤—ã–π –¥–∏–ø–ª–∏–Ω–∫
```
https://max.ru/<botUsername>
```

### –î–∏–ø–ª–∏–Ω–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (payload)
```
https://max.ru/<botUsername>?start=<payload>
```

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

**1. –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**
```
https://max.ru/mybot_bot?start=ref_12345
```

**2. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞:**
```
https://max.ru/mybot_bot?start=source_instagram
https://max.ru/mybot_bot?start=source_website
```

**3. –ü—Ä–æ–º–æ-–∫–æ–¥—ã:**
```
https://max.ru/mybot_bot?start=promo_summer2026
```

**4. –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:**
```
https://max.ru/mybot_bot?start=action_support
https://max.ru/mybot_bot?start=action_order
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ payload –≤ –±–æ—Ç–µ:

```python
updates = client.get_updates(timeout=30)
for update in updates:
    if update.get('update_type') == 'bot_started':
        payload = update.get('payload', '')
        chat_id = update.get('chat_id')
        
        if payload.startswith('ref_'):
            referrer_id = payload.replace('ref_', '')
            print(f"–†–µ—Ñ–µ—Ä–∞–ª –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {referrer_id}")
            # –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
        
        elif payload.startswith('promo_'):
            promo_code = payload.replace('promo_', '')
            print(f"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø—Ä–æ–º–æ-–∫–æ–¥: {promo_code}")
            # –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–º–æ-–∫–æ–¥
```

---

## üìä –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –≤ –≥—Ä—É–ø–ø–∞—Ö:

1. **–ë–æ—Ç –≤–∏–¥–∏—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ
2. **–ú–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è** –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º
3. **–ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑ –≥—Ä—É–ø–ø—ã

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –≤ –≥—Ä—É–ø–ø–µ:

```python
updates = client.get_updates(timeout=30)
for update in updates:
    if update.get('update_type') == 'message_created':
        message = update['message']
        recipient = message.get('recipient', {})
        chat_type = recipient.get('chat_type')  # 'dialog' –∏–ª–∏ 'group'
        
        if chat_type == 'group':
            print("–°–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞")
            # –û—Å–æ–±–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≥—Ä—É–ø–ø
        else:
            print("–õ–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ

### 1. –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—ã

**–ü—É—Ç—å:** –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ MAX ‚Üí –ß–∞—Ç-–±–æ—Ç –∏ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí –ù–∞—Å—Ç—Ä–æ–∏—Ç—å

**–í–∫–ª—é—á–∏—Ç–µ:** "–†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã"

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Webhook –∏–ª–∏ Long Polling)

**Long Polling** (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):
```python
client.get_updates(timeout=30)
```

**Webhook** (–¥–ª—è production):
```python
client.create_subscription(
    url="https://yourdomain.com/webhook",
    update_types=[
        "message_created",
        "message_callback",
        "bot_started",
        "message_edited",
        "message_removed"
    ]
)
```

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### 1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ chat_id

–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è chat_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```python
# –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Å JSON
import json

def save_chat_id(user_id, chat_id, name):
    try:
        with open('users.json', 'r') as f:
            users = json.load(f)
    except:
        users = {}
    
    users[str(user_id)] = {
        'chat_id': chat_id,
        'name': name
    }
    
    with open('users.json', 'w') as f:
        json.dump(users, f, indent=2)
```

### 2. –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞

```python
with open('users.json', 'r') as f:
    users = json.load(f)

for user_id, data in users.items():
    chat_id = data['chat_id']
    try:
        client.send_message(
            chat_id=chat_id,
            text="–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞."
        )
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ {chat_id}: {e}")
```

### 3. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```python
if text == '/id':
    response = f"–í–∞—à chat_id: {chat_id}"
    client.send_message(chat_id=chat_id, text=response)
```

---

## üì± –ò—Ç–æ–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–∞—Ç—å—Å—è —Å –±–æ—Ç–æ–º:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ MAX
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –ø–æ –∏–º–µ–Ω–∏: `@your_bot_name`
3. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å" –∏–ª–∏ "–ù–∞–ø–∏—Å–∞—Ç—å"
4. –ù–∞–ø–∏—à–∏—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
5. –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç –≤–∞–º!

**–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–∞—Ç–µ
3. "–£—á–∞—Å—Ç–Ω–∏–∫–∏" ‚Üí "–î–æ–±–∞–≤–∏—Ç—å"
4. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ:
‚úÖ –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç –±–æ—Ç–∞
‚úÖ –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å chat_id
‚úÖ –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—ã
‚úÖ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å deeplink'–∞–º–∏
‚úÖ –ö–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `get_chat_id_bot.py` –∏ –ø–æ–ª—É—á–∏—Ç–µ –≤–∞—à –ø–µ—Ä–≤—ã–π chat_id!
